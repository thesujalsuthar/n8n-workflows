# SmartHome AI Energy Optimizer and Carbon Footprint Reducer

## Overview

This n8n workflow automates the daily monitoring and optimization of your smart home's energy consumption and carbon footprint. It fetches energy data, calculates environmental impact, generates AI-driven actionable insights, and delivers a detailed report via email and mobile notification.

---

## Workflow Structure

### 1. Daily Trigger
- **Type:** Cron Trigger  
- **Schedule:** Every day at 07:00 AM  
- **Purpose:** Initiates the workflow each morning to analyze the previous day’s energy consumption.

### 2. Fetch Energy Consumption Data
- **Type:** HTTP Request  
- **Endpoint:** `https://api.smarthome.local/energy/consumption` (replace with your actual SmartHome API endpoint)  
- **Authentication:** API Key in the header (`Authorization: Bearer YOUR_SMARTHOME_API_TOKEN`)  
- **Purpose:** Retrieves detailed energy consumption readings (e.g., hourly kWh data) from your smart home system.

### 3. Process Consumption Data
- **Type:** Function Node  
- **Functionality:**  
  - Processes the fetched energy readings.  
  - Calculates total daily energy consumption in kWh.  
  - Applies a carbon footprint factor (default 0.233 kg CO₂ per kWh) to estimate total carbon emissions.  
  - Generates a prompt text summarizing consumption and emissions for AI optimization.

### 4. AI Optimization Suggestions
- **Type:** OpenAI Node  
- **Model:** GPT-4  
- **Parameters:**  
  - Temperature: 0.6 (for creative yet relevant suggestions)  
  - Max Tokens: 500  
- **Input:** The prompt generated by the function node, requesting actionable daily strategies to reduce energy use and carbon footprint.  
- **Output:** Practical insights and recommendations powered by AI.

### 5. Send Email Report
- **Type:** Email Send Node  
- **From:** `smarthome@yourdomain.com` (replace with your email)  
- **To:** `user@yourdomain.com` (replace with your recipient’s email)  
- **Subject:** Daily SmartHome Energy Optimization and Carbon Footprint Report  
- **Body:**  
  - Total energy consumption and carbon footprint figures.  
  - AI-generated recommendations for energy optimization.  
  - Friendly sign-off encouraging a green lifestyle.

### 6. Send Mobile Notification
- **Type:** Pushcut Notification Node (or substitute with your preferred push notification service)  
- **Title:** SmartHome Energy Optimization  
- **Message:** Summary including total energy, carbon footprint, and AI insights for quick access on mobile devices.

---

## Configuration Instructions

### API Access Setup
- Obtain your SmartHome API token.
- Replace `YOUR_SMARTHOME_API_TOKEN` in the **Fetch Energy Consumption Data** node with your actual token.
- Verify the API URL points to your smart home system's energy consumption endpoint.

### Email Settings
- Update the **fromEmail** and **toEmail** fields in the **Send Email Report** node with valid email addresses.
- Configure SMTP credentials or email service in your n8n instance to enable email sending.

### Push Notification Setup
- Configure your Pushcut (or alternative push service) integration in n8n.
- Ensure the **Send Mobile Notification** node is updated with correct notification settings according to your chosen service.

### OpenAI API
- Ensure your OpenAI credentials are configured in n8n.
- The workflow uses GPT-4; adjust model and parameters as necessary for your OpenAI account and use case.

---

## How It Works

1. **Trigger:** At 7 AM, the workflow activates.
2. **Data Fetching:** It collects the previous day’s energy consumption data from your smart home API.
3. **Processing:** Calculates total energy used and estimated carbon emissions based on a predefined emission factor.
4. **AI Analysis:** Sends a prompt with this data to GPT-4 to receive tailored energy optimization advice.
5. **Reporting:** Delivers a comprehensive email and mobile notification with consumption stats and AI recommendations ensuring you stay informed and proactive.
   
---

## Customization Tips

- Adjust the cron trigger time to better fit your daily routine.
- Modify the carbon footprint factor to reflect your local energy mix for more accurate calculations.
- Expand the function node to include more complex analytics such as peak consumption times or device-level breakdowns.
- Personalize the email and notification templates to add branding or additional data.
- Experiment with different OpenAI model parameters to tailor the style and detail level of AI suggestions.

---

## Benefits

- **Automated Insight:** Stay updated daily without manual effort.
- **Sustainability Focused:** Understand and actively reduce your carbon footprint.
- **AI-Powered Recommendations:** Get smart, actionable tips based on your real data.
- **Multi-Channel Reporting:** Receive updates wherever you prefer—email and mobile notifications.

---

## Support

For issues or feature requests, please check your n8n community forums or API provider documentation. Ensure all credentials and endpoint URLs are correctly configured to maintain reliable workflow execution.

---

Thank you for using the SmartHome AI Energy Optimizer and Carbon Footprint Reducer! Together, let's build greener homes and a healthier planet.