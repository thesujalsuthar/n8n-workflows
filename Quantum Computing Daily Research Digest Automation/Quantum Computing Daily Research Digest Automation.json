{
  "name": "Quantum Computing Daily Research Digest Aggregator",
  "nodes": [
    {
      "parameters": {
        "mode": "everyDay",
        "time": "08:00"
      },
      "name": "Trigger",
      "type": "n8n-nodes-base.scheduleTrigger",
      "typeVersion": 1,
      "position": [
        250,
        300
      ]
    },
    {
      "parameters": {
        "url": "https://api.crossref.org/works?query=quantum+computing&sort=published&order=desc&rows=5",
        "responseFormat": "json"
      },
      "name": "Fetch Latest Papers (Crossref)",
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 1,
      "position": [
        550,
        100
      ]
    },
    {
      "parameters": {
        "url": "https://api.rss2json.com/v1/api.json?rss_url=https://quantumcomputingreport.com/feed/",
        "responseFormat": "json"
      },
      "name": "Fetch News (Quantum Computing Report RSS)",
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 1,
      "position": [
        550,
        300
      ]
    },
    {
      "parameters": {
        "url": "https://api.space.com/v1/articles?section=technology&tag=quantum-computing&limit=5",
        "responseFormat": "json"
      },
      "name": "Fetch News (Space.com)",
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 1,
      "position": [
        550,
        500
      ]
    },
    {
      "parameters": {
        "functionCode": "const papers = $items(\"Fetch Latest Papers (Crossref)\")[0].json.message.items.map(item => ({\n  title: item.title[0],\n  authors: item.author ? item.author.map(a => a.family + \", \" + a.given).join('; ') : \"Unknown\",\n  published: item.published ? item.published['date-parts'][0].join('-') : \"Unknown\",\n  url: item.URL\n}));\n\nconst rssItems = $items(\"Fetch News (Quantum Computing Report RSS)\\").map(item => {\n  const articles = item.json.items || [];\n  return articles.map(article => ({\n    title: article.title,\n    link: article.link,\n    pubDate: article.pubDate\n  }));\n}).flat();\n\nconst spaceNews = $items(\"Fetch News (Space.com)\")[0].json.articles || [];\n\nconst news = spaceNews.map(article => ({\n  title: article.title,\n  url: article.url,\n  publishedAt: article.publishedAt\n}));\n\nreturn [{\n  json: {\n    papers,\n    rssNews: rssItems,\n    spaceNews: news\n  }\n}];"
      },
      "name": "Aggregate Data",
      "type": "n8n-nodes-base.function",
      "typeVersion": 1,
      "position": [
        800,
        300
      ],
      "notesInFlow": true,
      "notes": "Aggregates papers and news into structured data"
    },
    {
      "parameters": {
        "model": "gpt-4",
        "temperature": 0.5,
        "top_p": 1,
        "frequency_penalty": 0,
        "presence_penalty": 0,
        "max_tokens": 700,
        "messages": [
          {
            "role": "system",
            "content": "You are an assistant that summarizes research papers and news about quantum computing into key insights for a daily digest."
          },
          {
            "role": "user",
            "content": "Summarize the following daily quantum computing updates including research papers and news articles highlighting important developments and insights.\n\nPapers:\n{{$json.papers}}\n\nRSS News:\n{{$json.rssNews}}\n\nSpace.com News:\n{{$json.spaceNews}}"
          }
        ]
      },
      "name": "Summarize Updates (OpenAI)",
      "type": "n8n-nodes-base.openAi",
      "typeVersion": 1,
      "position": [
        1050,
        300
      ]
    },
    {
      "parameters": {
        "fromEmail": "quantum.digest@example.com",
        "toEmail": "={{$json[\"subscribers\"] || \"subscribers@example.com\"}}",
        "subject": "Quantum Computing Daily Research Digest",
        "text": "={{$node[\"Summarize Updates (OpenAI)\"].json.choices[0].message.content}}"
      },
      "name": "Send Digest Email",
      "type": "n8n-nodes-base.emailSend",
      "typeVersion": 1,
      "position": [
        1300,
        300
      ]
    },
    {
      "parameters": {
        "functionCode": "return [{ json: { subscribers: [\"subscriber1@example.com\", \"subscriber2@example.com\"] } }];"
      },
      "name": "Load Subscribers",
      "type": "n8n-nodes-base.function",
      "typeVersion": 1,
      "position": [
        1050,
        100
      ]
    },
    {
      "parameters": {
        "continueOnFail": true
      },
      "name": "Error Trigger",
      "type": "n8n-nodes-base.noOp",
      "typeVersion": 1,
      "position": [
        1500,
        300
      ]
    },
    {
      "parameters": {
        "fromEmail": "quantum.digest@example.com",
        "toEmail": "admin@example.com",
        "subject": "Error in Quantum Computing Daily Digest Workflow",
        "text": "={{$json[\"errorMessage\"]}}"
      },
      "name": "Send Error Notification",
      "type": "n8n-nodes-base.emailSend",
      "typeVersion": 1,
      "position": [
        1750,
        300
      ]
    }
  ],
  "connections": {
    "Trigger": {
      "main": [
        [
          {
            "node": "Fetch Latest Papers (Crossref)",
            "type": "main",
            "index": 0
          },
          {
            "node": "Fetch News (Quantum Computing Report RSS)",
            "type": "main",
            "index": 0
          },
          {
            "node": "Fetch News (Space.com)",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Fetch Latest Papers (Crossref)": {
      "main": [
        [
          {
            "node": "Aggregate Data",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Fetch News (Quantum Computing Report RSS)": {
      "main": [
        [
          {
            "node": "Aggregate Data",
            "type": "main",
            "index": 1
          }
        ]
      ]
    },
    "Fetch News (Space.com)": {
      "main": [
        [
          {
            "node": "Aggregate Data",
            "type": "main",
            "index": 2
          }
        ]
      ]
    },
    "Aggregate Data": {
      "main": [
        [
          {
            "node": "Load Subscribers",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Load Subscribers": {
      "main": [
        [
          {
            "node": "Summarize Updates (OpenAI)",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Summarize Updates (OpenAI)": {
      "main": [
        [
          {
            "node": "Send Digest Email",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Send Digest Email": {
      "main": [
        [
          {
            "node": "Error Trigger",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Error Trigger": {
      "main": [
        [
          {
            "node": "Send Error Notification",
            "type": "main",
            "index": 0
          }
        ]
      ]
    }
  },
  "active": false,
  "settings": {},
  "id": "1"
}